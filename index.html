<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <meta name = "viewport" content="width = device-width,initial-scale=1"/>
        <title>
            MY MAP
         </title>
         <!--Leaflet-->
         <link rel="stylesheet" href="lib/leaflet/leaflet.css"/>
         <script src="lib/leaflet/leaflet.js"></script>
         <script src="data/countries.geojson"></script>
         <style type="text/css">
         #map {height: 450px;}
         .legend{background:white;line-height: 1.5em;}
         .legend i{width: 5em;float: left;}
        </style>

    </head>
    <body>
    <h1>MY MAP</h1>
    <div id ="map"></div>
    <script>
       var countriesLayer;
       
       function highlightFeature(e){
           var layer = e.target;
           layer.setStyle(
              { wight: 6,
               color:'black',
               fillColor:'white',
               fillOpacity:0.5
              }

           )
       }
       function resetHighlight(e){
           countriesLayer.resetStyle(e.target);
       }
       function zoomToFeature(e){
        map.fitBounds(e.target.getBounds());
       }
       function countriesOnEachFeature(feature,layer){
           layer.on(
               {
               mouseover: highlightFeature,
               mouseout:resetHighlight,
               click: zoomToFeature,

           })
       }

        
        function getCountryColor(popEst){
                if(popEst>100000000){
                    return'red'
                }
                else if(popEst>50000000){
                    return 'blue'
                }
                else{
                     return 'green'
                }
            }
        function countriesStyle(feature){
            return{
                fillColor:getCountryColor(feature.properties.POP_EST),
                opacity:1,
                weight:2,
                color:'white',
                fillOpacity:0.7,
                dashArray: 3,

            }

            
        }
        

        var map = L.map('map').setView([1.2921,36.8219],6);
         countriesLayer=L.geoJson(
            countries,
            {
                style : countriesStyle,
                onEachFeature:countriesOnEachFeature,
            }
        ).addTo(map);
       // map.fitBounds(countriesLayer.getBounds());
        
        var legend = L.control({position: 'bottomright'})
          legend.onAdd = function(map){
            var div = L.DomUtil.create('div','legend')
            var labels = [
                "Population greater than 100000000",
                "Population greater than 50000000",
                "Population less than or equal to 50000000"
                ]
                var grades = [100000001,50000001,50000000]
                div.innerHTML = '<div><b>Legend</b></div>'
                for(var i = 0;i<grades.length;i++){
                    div.innerHTML  += '<i style = "background:'
                    + getCountryColor(grades[i]) +'">&nbsp;&nbsp;</i>&nbsp;&nbsp;' 
                    + labels[i] + '<br/>';
                }
                return div;
        }
        legend.addTo(map);
        var point = [1.2921,36.8219];
        var myIcon = L.icon({
          iconUrl:'marker-icon.png',
          
        
     }
        );
        var myMarker = L.marker(point,{icon :myIcon})

        myMarker.addTo(map);
        myMarker.bindPopup(
           '<b>Nairobi</b><div><img src="images.jpg"></div>'
        )

        
        
 

    </script>

        
    </body>
</html>